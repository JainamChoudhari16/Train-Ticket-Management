<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Dashboard - Railway Booking System</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="dashboard-body">
    <div class="dashboard-container">
        <!-- Sidebar -->
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <a href="customer-dashboard.html" class="d-flex align-items-center mb-3 mb-md-0 text-decoration-none">
                    <span class="fs-4 text-light"></span>
                </a>
            </div>
            <ul class="nav nav-pills flex-column mb-auto">
                <li class="nav-item">
                    <a href="#dashboard-section" class="nav-link active" data-section="dashboard-section">
                        <i class="bi bi-speedometer2 me-2"></i>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#book-ticket-section" class="nav-link" data-section="book-ticket-section">
                        <i class="bi bi-ticket-perforated me-2"></i>
                        Book Ticket
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#view-tickets-section" class="nav-link" data-section="view-tickets-section">
                        <i class="bi bi-card-list me-2"></i>
                        View Tickets
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#update-details-section" class="nav-link" data-section="update-details-section">
                        <i class="bi bi-person-gear me-2"></i>
                        Update Details
                    </a>
                </li>
            </ul>
            <hr>
            <div class="text-center mt-3">
                <a href="login.html" class="btn btn-sm btn-outline-light">
                    <i class="bi bi-box-arrow-right me-2"></i>Sign out
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="content">
            <header class="dashboard-header p-3 border-bottom">
                <div class="container-fluid">
                    <div class="d-flex flex-wrap align-items-center justify-content-between">
                        <button class="btn btn-primary btn-sm d-md-none me-3" id="sidebarToggle">
                            <i class="bi bi-list"></i>
                        </button>
                        <h1 class="h2 mb-0 section-title">Dashboard</h1>
                        <div class="d-flex align-items-center">
                            <div class="flex-shrink-0 dropdown">
                                <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser2" data-bs-toggle="dropdown" aria-expanded="false">
                                    <span>User</span>
                                </a>
                                <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser2">
                                    <li><a class="dropdown-item" href="#" id="profileMenuLink">Profile</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="login.html">Sign out</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="dashboard-section active-section">
                <div class="container-fluid py-4">
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card shadow-sm">
                                <div class="card-header">
                                    <h2 class="card-title h5 mb-0">Booking Statistics</h2>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h3 class="h6">Number of tickets booked per class</h3>
                                            <div class="table-responsive">
                                                <table class="table table-sm">
                                                    <thead>
                                                        <tr>
                                                            <th>Class</th>
                                                            <th>Tickets</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>First Class</td>
                                                            <td>3</td>
                                                        </tr>
                                                        <tr>
                                                            <td>A.C Tier 1</td>
                                                            <td>5</td>
                                                        </tr>
                                                        <tr>
                                                            <td>A.C Tier 2</td>
                                                            <td>8</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Tatkal</td>
                                                            <td>2</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h3 class="h6">Sales done per quarter</h3>
                                            <div class="table-responsive">
                                                <table class="table table-sm">
                                                    <thead>
                                                        <tr>
                                                            <th>Quarter</th>
                                                            <th>Sales (₹)</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Q1 (Jan-Mar)</td>
                                                            <td>₹15,780</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Q2 (Apr-Jun)</td>
                                                            <td>₹12,540</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Q3 (Jul-Sep)</td>
                                                            <td>₹18,920</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Q4 (Oct-Dec)</td>
                                                            <td>₹22,350</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="card h-100 shadow-sm">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="feature-icon bg-primary text-white me-3">
                                            <i class="bi bi-ticket-perforated"></i>
                                        </div>
                                        <h3 class="h5 mb-0">Total Bookings</h3>
                                    </div>
                                    <p class="display-6 mb-0">18</p>
                                    <p class="small text-muted">+5 this month</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card h-100 shadow-sm">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="feature-icon bg-success text-white me-3">
                                            <i class="bi bi-currency-rupee"></i>
                                        </div>
                                        <h3 class="h5 mb-0">Total Spent</h3>
                                    </div>
                                    <p class="display-6 mb-0">₹69,590</p>
                                    <p class="small text-muted">+₹12,350 this month</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card h-100 shadow-sm">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="feature-icon bg-info text-white me-3">
                                            <i class="bi bi-geo-alt"></i>
                                        </div>
                                        <h3 class="h5 mb-0">Total Distance</h3>
                                    </div>
                                    <p class="display-6 mb-0">4,582 km</p>
                                    <p class="small text-muted">+1,240 km this month</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Book Ticket Section -->
            <section id="book-ticket-section" class="dashboard-section">
                <div class="container-fluid py-4">
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow-sm">
                                <div class="card-header">
                                    <h2 class="card-title h5 mb-0">Book a New Ticket</h2>
                                </div>
                                <div class="card-body">
                                    <form id="bookTicketForm">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label for="ticketId" class="form-label">ID</label>
                                                <input type="text" class="form-control" id="ticketId" value="USER123" readonly>
                                                <div class="form-text">Auto-populated based on your login.</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="passengerName" class="form-label">Name</label>
                                                <input type="text" class="form-control" id="passengerName" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="passengerMobile" class="form-label">Mobile</label>
                                                <input type="tel" class="form-control" id="passengerMobile" maxlength="10" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="passengerAge" class="form-label">Age</label>
                                                <input type="number" class="form-control" id="passengerAge" min="1" max="120" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="journeyDate" class="form-label">Date</label>
                                                <input type="date" class="form-control" id="journeyDate" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="boardingStation" class="form-label">Boarding Station</label>
                                                <input type="text" class="form-control" id="boardingStation" placeholder="Enter boarding station" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="destinationStation" class="form-label">Destination Station</label>
                                                <input type="text" class="form-control" id="destinationStation" placeholder="Enter destination station" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="ticketCategory" class="form-label">Ticket Category</label>
                                                <select class="form-select" id="ticketCategory" required>
                                                    <option value="" selected disabled>Select ticket category</option>
                                                    <option value="First Class">First Class</option>
                                                    <option value="A.C Tier 1">A.C Tier 1</option>
                                                    <option value="A.C Tier 2">A.C Tier 2</option>
                                                    <option value="Tatkal">Tatkal</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="ticketCount" class="form-label">Number of Tickets</label>
                                                <input type="number" class="form-control" id="ticketCount" min="1" max="6" value="1" required>
                                            </div>
                                            <div class="col-12">
                                                <label for="availableTrains" class="form-label">Available Trains</label>
                                                <select class="form-select" id="availableTrains" required>
                                                    <option value="" selected disabled>Select train</option>
                                                    <option value="RAJ123">Rajdhani Express - 16:30</option>
                                                    <option value="SHT456">Shatabdi Express - 08:15</option>
                                                    <option value="DUR789">Duronto Express - 23:45</option>
                                                    <option value="GAR101">Garib Rath - 14:20</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <button type="submit" class="btn btn-primary">Book Ticket</button>
                                                <button type="reset" class="btn btn-outline-secondary">Reset</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- View Tickets Section -->
            <section id="view-tickets-section" class="dashboard-section">
                <div class="container-fluid py-4">
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow-sm">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h2 class="card-title h5 mb-0">Your Tickets</h2>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="showPastTickets">
                                        <label class="form-check-label" for="showPastTickets">Show Past Journeys</label>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="ticketsTable">
                                            <thead>
                                                <tr>
                                                    <th>Ticket ID</th>
                                                    <th>Train ID</th>
                                                    <th>User ID</th>
                                                    <th>User Name</th>
                                                    <th>Boarding</th>
                                                    <th>Destination</th>
                                                    <th>Boarding Date/Time</th>
                                                    <th>Arrival Date/Time</th>
                                                    <th>Tickets</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>TKT10023</td>
                                                    <td>RAJ123</td>
                                                    <td>USER123</td>
                                                    <td>John Doe</td>
                                                    <td>Mumbai</td>
                                                    <td>Delhi</td>
                                                    <td>2023-08-15 16:30</td>
                                                    <td>2023-08-16 10:15</td>
                                                    <td>2</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-danger cancel-ticket" data-bs-toggle="modal" data-bs-target="#cancelTicketModal" data-ticket-id="TKT10023">
                                                            <i class="bi bi-x-circle"></i> Cancel
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>TKT10024</td>
                                                    <td>SHT456</td>
                                                    <td>USER123</td>
                                                    <td>John Doe</td>
                                                    <td>Delhi</td>
                                                    <td>Kolkata</td>
                                                    <td>2023-09-20 08:15</td>
                                                    <td>2023-09-20 14:30</td>
                                                    <td>1</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-danger cancel-ticket" data-bs-toggle="modal" data-bs-target="#cancelTicketModal" data-ticket-id="TKT10024">
                                                            <i class="bi bi-x-circle"></i> Cancel
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Cancel Ticket Modal -->
                <div class="modal fade" id="cancelTicketModal" tabindex="-1" aria-labelledby="cancelTicketModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="cancelTicketModalLabel">Confirm Cancellation</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <p>Are you sure you want to cancel ticket <span id="cancelTicketId" class="fw-bold"></span>?</p>
                                <p class="text-danger">This action cannot be undone.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-danger" id="confirmCancelTicket">Confirm Cancellation</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Update Details Section -->
            <section id="update-details-section" class="dashboard-section">
                <div class="container-fluid py-4">
                    <div class="row">
                        <div class="col-12 col-lg-8 mx-auto">
                            <div class="card shadow-sm">
                                <div class="card-header">
                                    <h2 class="card-title h5 mb-0">Update Your Details</h2>
                                </div>
                                <div class="card-body">
                                    <form id="updateDetailsForm">
                                        <div class="mb-3">
                                            <label for="updateEmail" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="updateEmail" value="johndoe@example.com" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="updateMobile" class="form-label">Mobile Number</label>
                                            <input type="tel" class="form-control" id="updateMobile" value="9876543210" maxlength="10" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="updateAddress" class="form-label">Address</label>
                                            <textarea class="form-control" id="updateAddress" rows="3" required>123 Main Street, Mumbai - 400001</textarea>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="updatePassword">
                                                <label class="form-check-label" for="updatePassword">
                                                    Update Password
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div id="passwordUpdateSection" class="d-none">
                                            <div class="card mb-3">
                                                <div class="card-body">
                                                    <h3 class="card-title h6">Change Password</h3>
                                                    <div class="mb-3">
                                                        <label for="currentPassword" class="form-label">Current Password</label>
                                                        <input type="password" class="form-control" id="currentPassword">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="newPassword" class="form-label">New Password</label>
                                                        <input type="password" class="form-control" id="newPassword">
                                                        <div class="form-text">Must be at least 8 characters and include 1 special character, 1 number, and 1 uppercase letter.</div>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                                                        <input type="password" class="form-control" id="confirmNewPassword">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">Update Details</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Booking Confirmation Modal -->
    <div class="modal fade" id="bookingConfirmationModal" tabindex="-1" aria-labelledby="bookingConfirmationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="bookingConfirmationModalLabel">Booking Confirmed!</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="booking-details">
                        <h4 class="mb-3">Booking Details</h4>
                        <div class="row">
                            <div class="col-6 mb-2">
                                <p class="mb-0 text-muted">Booking ID:</p>
                                <p class="fw-bold" id="confirmBookingId">TKT10025</p>
                            </div>
                            <div class="col-6 mb-2">
                                <p class="mb-0 text-muted">Train ID:</p>
                                <p class="fw-bold" id="confirmTrainId">RAJ123</p>
                            </div>
                            <div class="col-6 mb-2">
                                <p class="mb-0 text-muted">From:</p>
                                <p class="fw-bold" id="confirmBoardingStation">Mumbai</p>
                            </div>
                            <div class="col-6 mb-2">
                                <p class="mb-0 text-muted">To:</p>
                                <p class="fw-bold" id="confirmDestinationStation">Delhi</p>
                            </div>
                            <div class="col-6 mb-2">
                                <p class="mb-0 text-muted">Journey Date:</p>
                                <p class="fw-bold" id="confirmJourneyDate">2023-10-15</p>
                            </div>
                            <div class="col-6 mb-2">
                                <p class="mb-0 text-muted">Tickets:</p>
                                <p class="fw-bold" id="confirmTicketCount">2</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="viewTicketsBtn">View All Tickets</button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div class="modal fade" id="userProfileModal" tabindex="-1" aria-labelledby="userProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userProfileModalLabel">User Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="user-profile-details">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Name</label>
                            <p id="profileName">John Doe</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Mobile Number</label>
                            <p id="profileMobile">9876543210</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Email</label>
                            <p id="profileEmail">johndoe@example.com</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Age</label>
                            <p id="profileAge">32</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Password</label>
                            <p>********</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editProfileBtn">Edit Profile</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/customer.js"></script>
</body>
</html> 